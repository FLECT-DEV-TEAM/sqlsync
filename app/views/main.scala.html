@(list: List[models.SqlInfo], oList: List[String])(implicit flash: Flash)

@base("SQLsync") {
<link rel="stylesheet" media="screen, print" href="@routes.Assets.at("javascripts/ext/bootstrap/css/bootstrap.min.css")">
<link rel='stylesheet' type='text/css' href='@routes.Assets.at("javascripts/ext/jqgrid/css/ui.jqgrid.css")' />
<link rel='stylesheet' type='text/css' href='@routes.Assets.at("javascripts/ext/timepicker/jquery-ui-timepicker.css")' />
<style>
body {
	padding: 40px;
}
.error {
	color: red;
	margin-top: 20px;
}
#formList {
	list-style:none;
}
#formList li label {
	display: inline-block;
	width: 120px;
}
#formList li {
	padding: 10px;
	width: 700px;
}

#formList li:nth-child(even) {
	background-color: #e0efff;
}

#gridDiv {
	margin-top: 20px;
	width: 90%;
}
</style>
<script src="@routes.Assets.at("javascripts/ext/bootstrap/js/bootstrap.min.js")"></script>
<script type='text/javascript' src='@routes.Assets.at("javascripts/ext/jqgrid/js/i18n/grid.locale-ja.js")'></script>
<script type='text/javascript' src='@routes.Assets.at("javascripts/ext/jqgrid/js/jquery.jqGrid.src.js")'></script>
<script type='text/javascript' src='@routes.Assets.at("javascripts/ext/timepicker/jquery-ui-timepicker.js")'></script>
<script src="@routes.Assets.at("javascripts/sqlgrid.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/sqlsync.js")" type="text/javascript"></script>
<script>
var app;
$(document).ready(function() {
	$.fn.button.noConflict();
	app = new flect.app.sqlsync.SqlSync();
});
</script>
<div id="header" class="navbar navbar-inverse navbar-fixed-top">
	<div class="navbar-inner">
		<div class="container-fluid">
			<span class="brand">SQLSync</span>
		</div>
	</div>
</div>
<div>
	<div>
		<h2>同期SQL一覧</h2>
		<table id="sql-table" border="1" class="table table-striped table-bordered table-hover">
			<thead>
				<tr>
					<th>名前</th>
					<th>説明</th>
					<th>オブジェクト名</th>
					<th>外部ID</th>
					<th>前回対象日時</th>
					<th>次回対象日時</th>
					<th>ステータス</th>
					<th>メッセージ</th>
				</tr>
			</thead>
			<tbody>
				@list.map{ obj =>
				<tr class="sqlinfo" data-sql="@obj.sql">
					<td>@obj.name</td>
					<td>@obj.desc</td>
					<td>@obj.objectName</td>
					<td>@obj.externalIdFieldName</td>
					<td>@obj.prevExecuted.format("yyyy-MM-dd HH:mm:ss")</td>
					<td>@obj.lastExecuted.format("yyyy-MM-dd HH:mm:ss")</td>
					<td>@obj.status</td>
					<td>@obj.message</td>
				</tr>}
			</tbody>
		</table>
		<button id="btnUpdate" class="btn btn-info" disabled>更新</button>
		<button id="btnDelete" class="btn btn-info" disabled>削除</button>
	</div>
	<hr>
	<div>
		<button id="btnAdd" class="btn btn-info">追加</button>
		<ul id="formList">
			<li>
				<label>名前</label>
				<input class="sql-data" type="text" id="name" name="name" value="@flash.get("name")">
			</li>
			<li>
				<label>説明</label>
				<input class="sql-data input-xxlarge" type="text" id="desc" name="desc" value="@flash.get("desc")">
			</li>
			<li>
				<label>SQL</label>
				<textarea class="sql-data input-xxlarge" id="sql" name="sql" cols="120" rows="10">@flash.get("sql")</textarea>
			</li>
			<li>
				<label>オブジェクト名</label>
				<select class="sql-data"  type="text" id="objectName" name="objectName">@oList.map{ s => <option value="@s" @flash.get("objectName").filter(_ == s).map(s=> "selected")>@s</option>}</select>
			</li>
			<li>
				<label>外部ID</label>
				<input class="sql-data" type="text" id="externalIdFieldName" name="externalIdFieldName" value="@flash.get("externalIdFieldName")">
			</li>
			<li>
				<label>対象日時</label>
				<input type="text" id="sql-datetime" name="sql-datetime">
			</li>
		</ul>
	</div>
	<div>
		<button id="btnSQL" class="btn btn-info">SQLテスト実行</button> 
		<button id="btnSync" class="btn btn-info">同期実行</button> 
	</div>
	<div id="error-msg" class="error">
	</div>
	<div id="gridDiv"
	</div>
</div>
}
